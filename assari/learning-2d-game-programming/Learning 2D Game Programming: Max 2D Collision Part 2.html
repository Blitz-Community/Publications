<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0127)http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app202.us.archive.org';v.server_ms=200;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/wombat.js" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("http://web.archive.org/web");
  __wm.wombat("http://www.2dgamecreators.com:80/tutorials/gameprogramming/collision/T2%20Collision.html","20061014223207","http://web.archive.org/","web","/_static/",
	      "1160865127");
</script>
<link rel="stylesheet" type="text/css" href="./Learning 2D Game Programming: Max 2D Collision Part 2_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./Learning 2D Game Programming: Max 2D Collision Part 2_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->










































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  








































  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>Learning 2D Game Programming: Max 2D Collision Part 2</title>
  <meta content="Assari" name="author">
</head>


<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
</div><div id="wm-ipp-print">The Wayback Machine - http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com:80/tutorials/gameprogramming/collision/T2%20Collision.html</div>
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/donate.html" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(650,27,25,2,"web","http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2 Collision.html","20061014223207",1996,"/_static/",["/_static/css/banner-styles.css?v=omkqRugM","/_static/css/iconochive.css?v=qtvMKcIJ"], "False");
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;">Learning 2D Game Programming: Max 2D Collision Part 2</span></span></span><br>
<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;">








































</span>(c) Assari 2006<br>

<br>































</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T1%20Collision2.html">Part 1</a>, <a href="http://web.archive.org/web/20061014223207/file:///D:/My%20Documents%20on%20E/Blitz/Tutorials/Beginning%20BlitzMax%20Game%20Programming/Collision/T2%20Collision.html">Part 2</a>, <a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T3%20Collision.html">Part 3</a><br>

<br>

</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">Table of Contents<br>









































</span></span>
<ol style="font-family: Tahoma;" id="mozToc">




<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6--><li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId578655">Introduction</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId938547">CollideImage</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId887931">Collision Layer</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId316595">Collision returning Object Arrays</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId316595">Collision Layer Example</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId938547">Summary</a></li>




  <li><a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T2%20Collision.html#mozTocId273988">Further Reading</a></li>




</ol>


























<h1><a class="mozTocH1" name="mozTocId578655"></a><small><small><span style="font-family: Tahoma;">Introduction</span></small></small></h1>


























<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;"></span>We
saw in the previous tutorial how to check for collisions using our
built function RectOverlaps and CircRectOverlaps. We also saw the more
powerful (pixel perfect) built-in collision functions ImagesCollide and
ImagesCollide2.<br>







<br>







In this tutorial we are going to look at two othe built-in collision
function which employs a different technique to the ones we have seen
before.<br>







</span></span>
<h1><a class="mozTocH1" name="mozTocId938547"></a><small><small><small><span style="font-family: Tahoma;">CollideImage</span></small></small></small></h1>
















<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span><span style="font-family: Arial;"></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">But in setting the scene, let us introduce this collision function</span></span><span style="font-family: Arial;">
using the scaling problem we saw earlier and see how to do that using
this technique. The syntax for CollideImage can cause a lot of
confusion. I'm presenting it below but let's ignore it for a minute and
see the&nbsp;changes we had to make to our previous program to solve
the collision detection problem using the CollideImage function:-</span><span style="font-family: Tahoma;"><span style="font-weight: bold;"><br>







<br>







</span></span><span style="font-family: Arial;"></span>

<table style="text-align: left; font-family: Tahoma; width: 785px; height: 55px;" border="0" cellpadding="2" cellspacing="2">















  <tbody>















    <tr>















      <td align="undefined" valign="undefined"></td>















      <td style="background-color: rgb(204, 255, 255);">Function 
CollideImage:Object[](image:TImage,x,y,frame,collidemask%,writemask%,id:Object=Null)<span style="font-weight: bold;"></span></td>















      <td align="undefined" valign="undefined"></td>















    </tr>










    






  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>








<br>








<span style="font-family: Arial;">Note the changes as highlighted (as per usual, the grey text are unchanged from the previous tutorial)<br>






<br>








</span>
<table style="text-align: left; width: 732px; height: 439px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;">Graphics 640,480<br>








      Local URL:String="http::www.2dgamecreators.com/tutorials/gameprogramming/basic/"<br>








      Local Player:TImage=LoadImage(LoadBank(URL+"blobship_1-1.png"))<br>








      Local Alien:TImage</span><span style="font-family: Tahoma;">=LoadAnimImage</span><span style="font-family: Tahoma;">(LoadBank(URL+"exp1.png"),64,64,0,16)<br>








      </span><span style="font-family: Tahoma;">Local Frame:Int=0<br>








Local AnimDelay:int=10<br>








      Local PlayerSize:Int=1<br>








      Local AlienSize:Int=2<br>








      <br>








      </span><span style="font-family: Tahoma;">While Not KeyHit(key_escape) Or AppTerminate()<br>







&nbsp; Cls<br>







&nbsp; <span style="color: rgb(255, 255, 102);">ResetCollisions()</span><br>







&nbsp; SetScale AlienSize,AlienSize<br>







&nbsp; DrawImage Alien,150,100,Frame<br>







&nbsp; <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Alien,150,100,Frame,0,2)</span><br>







      <br>







&nbsp; SetScale PlayerSize,PlayerSize<br>







&nbsp; DrawImage Player,MouseX(),MouseY()<br>







&nbsp; If <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Player,<span style="color: rgb(255, 255, 102);">MouseX</span>(),<span style="color: rgb(255, 255, 102);">MouseY</span>(),0,2,0)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"></span><span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetClsColor 255,0,0</span><br style="color: rgb(153, 153, 153);">







      <span style="color: rgb(153, 153, 153);">
&nbsp; Else</span><br style="color: rgb(153, 153, 153);">







      <span style="color: rgb(153, 153, 153);">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetClsColor 0,0,0</span><br style="color: rgb(153, 153, 153);">







      <span style="color: rgb(153, 153, 153);">
&nbsp; EndIf</span><br style="color: rgb(153, 153, 153);">







      <span style="color: rgb(153, 153, 153);">
&nbsp; Flip</span><br style="color: rgb(153, 153, 153);">







      <span style="color: rgb(153, 153, 153);">
&nbsp; If AnimDelay&lt;0 Then</span><br>








      </span><span style="font-family: Tahoma;">&nbsp; &nbsp; &nbsp;Frame :+ 1<br>








&nbsp; &nbsp; &nbsp;If Frame&gt;15 Then Frame=0</span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><br style="color: rgb(153, 153, 153);">








      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp; AnimDelay=10</span><br style="color: rgb(153, 153, 153);">








      <span style="color: rgb(153, 153, 153);">&nbsp; EndIf</span><br style="color: rgb(153, 153, 153);">








      <span style="color: rgb(153, 153, 153);">&nbsp; AnimDelay :- 1</span><br>








      </span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span><span style="color: rgb(255, 255, 255);"></span></span></span><br>








      <span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;">Wend<br>








End</span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>








<span style="font-family: Arial;"><br>








Running the above code, you will see that the collision behaves exactly the same as per the previous tutorial.<br>






</span>
<h1><a class="mozTocH1" name="mozTocId887931"></a><small><small><small><span style="font-family: Tahoma;">Collision Layer</span></small></small></small></h1>






<span style="font-family: Arial;">This new BlitzMax collision system
introduces the concept of collision layers. The steps to use the
collision detection mechanism would be as follows:-<br>






</span>
<ul>






  <li><span style="font-family: Arial;">first ensure that the collision layer is cleared&nbsp;</span></li>






  <li><span style="font-family: Arial;">write to the collision layer the image you want to check collision against</span></li>






  <li><span style="font-family: Arial;">compare the image that you want to check collision against the image which is in the collision layer</span></li>






</ul>






<span style="font-family: Arial;">There are actually 32 collision layers that we can use. In the example above we are using collision layer #1.<br>






In the program above, the 3 steps are accomplished as follows:-<br>






<br>






ResetCollisions() clears all the Collision Layer. We could have use ResetCollision(2) as well to just clear layer #2<br>






</span>
<table style="text-align: left; width: 732px; height: 31px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; <span style="color: rgb(255, 255, 102);">ResetCollisions()</span><br>






      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(153, 153, 153);"></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<br>






<span style="font-family: Arial;">This first CollideImage statement; writes the Alien Image onto Collision Layer 2</span>
<table style="text-align: left; width: 732px; height: 61px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Alien,150,100,Frame,0,2)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(153, 153, 153);"></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>






This CollideImage statement reads from Collision Layer 2 and checks collision between the Player and Alien Images<br>






</span>
<table style="text-align: left; width: 732px; height: 52px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; If <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Player,<span style="color: rgb(255, 255, 102);">MouseX</span>(),<span style="color: rgb(255, 255, 102);">MouseY</span>(),0,2,0)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"></span><span style="color: rgb(153, 153, 153);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>






This is what Mark Sibly, the creator of BlitzMax has to say about layers:-<br>






</span><span style="font-family: Arial;"></span><br>








<small>






  </small><small>






    </small><small>






      </small><small>






      </small><small>






      </small><small>






    </small><small>

    






  
  
  
  
  
  </small>
  <small>
  </small>
<table style="text-align: left; font-family: Tahoma; width: 787px; height: 354px;" border="0" cellpadding="2" cellspacing="2">








  <tbody>








    <tr>








      <td align="undefined" valign="undefined"><small></small></td>








      <td style="background-color: rgb(204, 255, 255);">The basic idea is that the collidemask and writemask parameters are 
bitmasks (eg: 1,2,4,8,16 etc) giving you up to 32 'layers' to write/collide 
to/with. For example, you could use the following 
layers:<br>






      <br>






background=0, monsters=1, pickups=2, player=3.<br>






      <br>






The 
bitmasks for these would be 1,2,4,8 respectively (bitmask=1 Shl 
layer).<br>






      <br>






Using a bitmask instead of just a layer number allows you to 
specify multiple layers, eg: bitmask 3 would mean both layer 0 and layer 
1.<br>






      <br>






CollideImage simultaneously writes an image to 0-32 layers 
(depending on the writemask) and checks for collisions with 0-32 layers 
(dependingon the collidemask).<br>






      <br>






By 'writes an image', all it really 
does internally is store the image, and current rot/scale etc. However, you 
can think of it as physically 'writing' the image.<br>






      </td>






      <td align="undefined" valign="undefined"></td>






    </tr>






  
  
  
  
  
  
  </tbody>
</table>






<br>








<span style="font-family: Arial;">What Mark is talking about is the collidemask% and writemask% parameter <br>






</span>
<table style="text-align: left; font-family: Tahoma; width: 785px; height: 55px;" border="0" cellpadding="2" cellspacing="2">















  <tbody>















    <tr>















      <td align="undefined" valign="undefined"></td>















      <td style="background-color: rgb(204, 255, 255);">Function 
CollideImage:Object[](image:TImage,x,y,frame,<span style="font-weight: bold;">collidemask%,writemask%</span>,id:Object=Null)<span style="font-weight: bold;"></span></td>















      <td align="undefined" valign="undefined"></td>















    </tr>










    






  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>






To write an image to Collision Layer 1, we should provide the <span style="font-weight: bold;">writemask</span> parameter as follows:-<br>






</span>
<table style="text-align: left; width: 732px; height: 61px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Alien,150,100,Frame,0,<span style="color: rgb(255, 102, 102);">1</span>)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(153, 153, 153);"></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<br>






<span style="font-family: Arial;">&nbsp;We can also write to both Collision Layer 1 and 2 as follows:-</span>
<table style="text-align: left; width: 732px; height: 61px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Alien,150,100,Frame,0,<span style="color: rgb(255, 102, 102);">3</span>)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(153, 153, 153);"></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>






Similar, to read (check for a collision on layer 1) we need to provide the collidemask% value:-</span><br>






<table style="text-align: left; width: 732px; height: 52px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; If <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Player,<span style="color: rgb(255, 255, 102);">MouseX</span>(),<span style="color: rgb(255, 255, 102);">MouseY</span>(),0,<span style="color: rgb(255, 102, 102);">1</span>,0)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"></span><span style="color: rgb(153, 153, 153);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>






And similarly check for collision on 2 layers at the same time we use:-</span><br>






<table style="text-align: left; width: 732px; height: 52px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span><span style="font-family: Tahoma;">&nbsp; If <span style="color: rgb(255, 255, 102);">CollideImage</span><span style="color: rgb(255, 255, 255);">(Player,<span style="color: rgb(255, 255, 102);">MouseX</span>(),<span style="color: rgb(255, 255, 102);">MouseY</span>(),0,<span style="color: rgb(255, 102, 102);">3</span>,0)</span><br>







      </span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"></span><span style="color: rgb(153, 153, 153);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>






<span style="font-family: Arial;"><br>




The beauty of Collision layers is that you can then check collision
only againts the layers that matters. Before we look at a simple
example lets take a look at another concept first:-</span>
<h1><a class="mozTocH1" name="mozTocId316595"></a><small><small><small><span style="font-family: Tahoma;">Collision returning Object Arrays</span></small></small></small></h1>








<span style="font-family: Arial;">So far what we have been using to
check for collision is the if &lt;Collision Function&gt; returns a true
then a collision has happened type statement.<br>






<br>






The BlitzMax CollideImage function actually has a much more powerful
way of dealing with collision checking. We are now going to solve the
mystery of the <span style="font-weight: bold;">Object[]</span> and <span style="font-weight: bold;">id:Object</span> part of the CollideImage syntax.<br>






<br>






</span>
<table style="text-align: left; font-family: Tahoma; width: 785px; height: 55px;" border="0" cellpadding="2" cellspacing="2">















  <tbody>















    <tr>















      <td align="undefined" valign="undefined"></td>















      <td style="background-color: rgb(204, 255, 255);">Function 
CollideImage:<span style="font-weight: bold;">Object[]</span>(image:TImage,x,y,frame,collidemask%,writemask%,<span style="font-weight: bold;">id:Object=Null</span>)<span style="font-weight: bold;"></span></td>















      <td align="undefined" valign="undefined"></td>















    </tr>










    






  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>






<br>






<span style="font-family: Arial;">Remember that in the above introduction on CollideImage we said that there were 2 version of CollideImage,<br>




</span>
<ul>




  <li><span style="font-family: Arial;">&nbsp;the write version with writemask</span></li>




  <li><span style="font-family: Arial;">and the read version with collidemask</span></li>




</ul>




<span style="font-family: Arial;">When we are writing to the collision
layer, the id:Object parameters allows us to identify the image we are
writing to the Collision layer.<br>




<br>




Once the identities have been written, when we read from the collision
layer, the objects involved in the collision will be returned in the
Object array.<br>




<br>




Let us illustrate this with a very simple example:-<br>




 </span>
<table style="text-align: left; width: 732px; height: 439px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;">Strict<br>




Graphics <span style="color: rgb(51, 255, 51);">640,480</span><br>




AutoMidHandle True<br>




      <br>




Local <span style="color: rgb(255, 255, 255);">URL</span>:String=<span style="color: rgb(51, 255, 51);">"http::www.2dgamecreators.com/tutorials/gameprogramming/basic/"</span><br>




Local <span style="color: rgb(255, 255, 255);">SpaceShip</span>:TImage=LoadImage(LoadBank(</span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);">URL</span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;">+<span style="color: rgb(51, 255, 51);">"blobship_1-1.png"</span>))<br>




Local <span style="color: rgb(255, 255, 255);">AlienShip1</span>:TImage=LoadImage(LoadBank(</span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);">URL</span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;">+<span style="color: rgb(51, 255, 51);">"cartoonufo_1-1.png"</span>))<br>




Local <span style="color: rgb(255, 255, 255);">AlienShip2</span>:TImage=LoadImage(LoadBank(</span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);">URL</span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;">+<span style="color: rgb(51, 255, 51);">"cartoonufo_1-1.png"</span>))<br>




      <br>




Repeat<br>




&nbsp;Cls<br>




&nbsp;Local <span style="color: rgb(255, 255, 255);">R</span>:Int=<span style="color: rgb(255, 255, 255);">0</span><br>




&nbsp;Local <span style="color: rgb(255, 255, 255);">G</span>:Int=<span style="color: rgb(255, 255, 255);">0</span><br>




&nbsp;Local <span style="color: rgb(255, 255, 255);">B</span>:Int=<span style="color: rgb(255, 255, 255);">255</span><br>




&nbsp;ResetCollisions()<br>




&nbsp;SetColor <span style="color: rgb(255, 255, 255);">255,255,255</span><br>




&nbsp;DrawImage <span style="color: rgb(255, 255, 255);">AlienShip1, 250,100</span><br>




&nbsp;CollideImage<span style="color: rgb(255, 255, 255);">(AlienShip1,250,100,0,0,1,AlienShip1)</span><br>




      <br>




&nbsp;DrawImage <span style="color: rgb(255, 255, 255);">AlienShip2, 400,100</span><br>




&nbsp;CollideImage<span style="color: rgb(255, 255, 255);">(AlienShip2,400,100,0,0,1,AlienShip2)</span><br>




&nbsp;Local <span style="color: rgb(255, 255, 255);">p:</span>Object[]=<span style="color: rgb(255, 255, 255);">CollideImage(Spaceship,<span style="color: rgb(255, 255, 102);">MouseX</span>(),<span style="color: rgb(255, 255, 102);">MouseY</span>(),0,1,0)</span><br>




&nbsp;For Local <span style="color: rgb(255, 255, 255);">i:</span>TImage=EachIn <span style="color: rgb(255, 255, 255);">p</span><br>




&nbsp;&nbsp; &nbsp;Select <span style="color: rgb(255, 255, 255);">i</span><br>




&nbsp;&nbsp; &nbsp;Case <span style="color: rgb(255, 255, 255);">AlienShip1</span><br style="color: rgb(255, 255, 255);">




      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; R=255</span><br style="color: rgb(255, 255, 255);">




      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp; &nbsp;<span style="color: rgb(255, 255, 102);">Case</span> AlienShip2</span><br style="color: rgb(255, 255, 255);">




      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; G=255</span><br>




&nbsp;&nbsp; &nbsp;End Select<br>




&nbsp;Next<br>




&nbsp;SetColor <span style="color: rgb(255, 255, 255);">R,G,B&nbsp;</span>&nbsp; &nbsp;<br>




&nbsp;DrawImage<span style="color: rgb(255, 255, 255);"> SpaceShip,</span>MouseX(),MouseY()<br>




&nbsp;Flip<br>




      <br>




Until KeyDown<span style="color: rgb(255, 255, 255);">(KEY_ESCAPE)</span> Or AppTerminate()</span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Arial;"><br>




Note that the color changes depending on the collision state. We can also detect collisons with both ships with just a single <span style="font-weight: bold;">CollideImage</span> statement as all collided objects are returned into the Object Array<br>




</span>
<table style="text-align: left; width: 100px;" border="0" cellpadding="2" cellspacing="2">






  <tbody>






    <tr>






      <td style="width: 33px;" align="undefined" valign="undefined"></td>






      <td style="width: 468px;" align="undefined" valign="undefined"><img style="width: 500px; height: 396px;" alt="" src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/T1 0011.png"><br>




      </td>






      <td><img style="width: 500px; height: 396px;" alt="" src="./Learning 2D Game Programming: Max 2D Collision Part 2_files/T1 0012.png"></td>






    </tr>






  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Arial;"><br>




If you were to not write the AlienShip1 object to the last CollideImage
parameter, you cannot detect collision by its Object Name. Try it out
and see<br>




</span>
<table style="text-align: left; width: 732px; height: 66px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span>&nbsp;<span style="color: rgb(153, 153, 153);">DrawImage AlienShip1, 250,100</span><br>




&nbsp;CollideImage<span style="color: rgb(255, 255, 255);">(AlienShip1,250,100,0,0,1,<span style="color: rgb(255, 255, 102);">Null</span>)</span><br>




      </span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Arial;"><br>



Note that if you were to also write the SpaceShip image to the
collision layer, the SpaceShip object will also be returned in the
Object Array. So if you are checking for collision you will need to
take care of this, otherwise you will think a collision has occured
whereas actually you are just colliding with yourself! In my examples
so far, I did not write the player image to the collision layer so this
is not a problem.</span><br>




<span style="font-family: Arial;"></span>
<h1><a class="mozTocH1" name="mozTocId316595"></a><small><small><small><span style="font-family: Tahoma;">Collision Layer Example</span></small></small></small></h1>




<span style="font-family: Arial;">Below (in highlight) is an example with detecting collisions at different layers<br>




 </span>
<table style="text-align: left; width: 732px; height: 439px;" border="0" cellpadding="2" cellspacing="2">
































  <tbody>
































    <tr>
































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>
































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;">Strict<br>




Graphics 640,480<br>




AutoMidHandle True<br>




      <br>




Local URL:String="http::www.2dgamecreators.com/tutorials/gameprogramming/basic/"<br>




Local SpaceShip:TImage=LoadImage(LoadBank(</span><span style="font-family: Tahoma;">URL</span><span style="font-family: Tahoma;">+"blobship_1-1.png"))<br>




Local AlienShip1:TImage=LoadImage(LoadBank(</span><span style="font-family: Tahoma;">URL</span><span style="font-family: Tahoma;">+"cartoonufo_1-1.png"))<br>




Local AlienShip2:TImage=LoadImage(LoadBank(</span><span style="font-family: Tahoma;">URL</span><span style="font-family: Tahoma;">+"cartoonufo_1-1.png"))<br>




      <br>




Repeat<br>




&nbsp;Cls<br>




&nbsp;Local R:Int=0<br>




&nbsp;Local G:Int=0<br>




&nbsp;Local B:Int=255<br>




&nbsp;ResetCollisions(<span style="color: rgb(255, 255, 255);">3</span>)<br>




&nbsp;SetColor 255,255,255<br>




&nbsp;DrawImage AlienShip1, 250,100<br>




&nbsp;CollideImage(AlienShip1,250,100,0,0,1,AlienShip1)<br>




      <br>




&nbsp;DrawImage AlienShip2, 400,100<br>




&nbsp;CollideImage(AlienShip2,400,100,0,0,<span style="color: rgb(255, 255, 255);">2</span>,AlienShip2)<br>




&nbsp;<span style="color: rgb(255, 255, 255);"><span style="color: rgb(255, 255, 102);">Local</span> Collision_Layer:<span style="color: rgb(255, 255, 102);">int</span>=2</span><br>




&nbsp;Local p:Object[]=CollideImage(Spaceship,MouseX(),MouseY(),0,</span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);">Collision_Layer</span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;">,0)<br>




&nbsp;For Local i:TImage=EachIn p<br>




&nbsp;&nbsp; &nbsp;Select i<br>




&nbsp;&nbsp; &nbsp;Case AlienShip1<br>




&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; R=255<br>




&nbsp;&nbsp; &nbsp;Case AlienShip2<br>




&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; G=255<br>




&nbsp;&nbsp; &nbsp;End Select<br>




&nbsp;Next<br>




&nbsp;SetColor R,G,B&nbsp;&nbsp; &nbsp;<br>




&nbsp;DrawImage SpaceShip,MouseX(),MouseY()<br>




&nbsp;Flip<br>




      <br>




Until KeyDown(KEY_ESCAPE) Or AppTerminate()</span><span style="font-family: Tahoma;"></span></span></td>








      <td align="undefined" valign="undefined"></td>








    </tr>








  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Arial;"><br>




If you run the above code, you will see that our spaceship will only
get a positive collision when the same Collision Layer is read. To
detect ship 1, use Collision_Layer:int=1. To detect both ships, change
the Collision_Layer variable to 3.</span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>







</span></span>
<h1><a class="mozTocH1" name="mozTocId938547"></a><small><small><small><span style="font-family: Tahoma;">Summary</span></small></small></small></h1>




<span style="font-family: Arial;">The objective of this second part was
to show you how to use the more powerful CollideImage collision
function compared with the more traditional image by image collision
method like the one shown in part &nbsp;1 of the tutorial.<br>




<br>




The thing to remember is that the collision comparison is not done on
the drawing canvas but on a separate collision layer therefore allowing
for a more selective (and faster) collision checking. BlitzMax has 32
Collision layers that we can use.<br>




<br>




So to reiterate<br>




</span>
<ul>




  <li><span style="font-family: Arial;">first clear the collision layer by using the ResetCollisions(layer#) function.</span></li>




  <li><span style="font-family: Arial;">write to the collision layer(s) the images we want to check for collision</span></li>




  <li><span style="font-family: Arial;">read from the collision layer(s) to perform the actual collision check</span></li>




</ul>




<span style="font-family: Arial;">** Don;t forget that the layers are maskable.<br>




<br>


</span><span style="font-family: Arial;">








Back to the <a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/index.html">index</a></span><span style="font-family: Arial;">, <a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T1%20Collision2.html">Previous</a> Tutorial, <a href="http://web.archive.org/web/20061014223207/http://www.2dgamecreators.com/tutorials/gameprogramming/collision/T3%20Collision.html">Next</a> Tutorial</span><br>


<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span>









<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">
</span></span><span style="font-family: Tahoma;"></span>


<!--
     FILE ARCHIVED ON 22:32:07 Oct 14, 2006 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 05:42:13 Oct 04, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 106.715
  exclusion.robots: 0.185
  exclusion.robots.policy: 0.179
  RedisCDXSource: 4.844
  esindex: 0.007
  LoadShardBlock: 83.429 (3)
  PetaboxLoader3.datanode: 95.46 (4)
  CDXLines.iter: 15.254 (3)
  load_resource: 80.924
  PetaboxLoader3.resolve: 26.498
--></body></html>