<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0123)http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app214.us.archive.org';v.server_ms=235;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/wombat.js" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("http://web.archive.org/web");
  __wm.wombat("http://www.2dgamecreators.com:80/tutorials/gameprogramming/breakout/B2_BreakOut.html","20070820042413","http://web.archive.org/","web","/_static/",
	      "1187583853");
</script>
<link rel="stylesheet" type="text/css" href="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->



























































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

























































  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>Part 6: A new revised Framework with Game States</title>
  <meta content="Assari" name="author">
</head>


<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
</div><div id="wm-ipp-print">The Wayback Machine - http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com:80/tutorials/gameprogramming/breakout/B2_BreakOut.html</div>
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/donate.html" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(650,27,25,2,"web","http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html","20070820042413",1996,"/_static/",["/_static/css/banner-styles.css?v=omkqRugM","/_static/css/iconochive.css?v=qtvMKcIJ"], "False");
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
















































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;">How to write a BreakOut Game: Part 6: A new revised Framework with Game States<br>


























































</span>(c) Assari 2006<br>
















































<br>




















<a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/T1_Images.html"></a></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">Table of Contents<br>


























































</span></span>
<ol style="font-family: Tahoma;" id="mozToc">
<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6--><li><a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html#mozTocId578655">Introduction</a></li>
  <li><a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html#mozTocId412623">The START and WAIT Game States</a></li>
  <li><a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html#mozTocId578655">Adding the GAMEOVER GameState</a></li>
  <li><a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/B2_BreakOut.html#mozTocId938547">Summary</a></li>
</ol>











































<h1><a class="mozTocH1" name="mozTocId578655"></a><small><small><span style="font-family: Tahoma;">Introduction</span></small></small></h1>











































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;"></span>In the previous tutorial we introduced 2 GameStates, PLAY and PAUSE. In this tutorial we will add in three more GameStates<br>

</span></span>
<ul>

  <li><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">The START GameState</span></span></li>

  <li><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">The WAIT GameState</span></span></li>

  <li><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">The GAMEOVER GameState</span></span><br>

  </li>

</ul>

<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span>
<h1><a class="mozTocH1" name="mozTocId412623"></a><small><small><span style="font-family: Tahoma;">The START and WAIT Game States</span></small></small></h1>











































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;"></span>Instead
of going immediately to the PLAY GameState at the very start of a game,
most games actually have a startup stage where we can normally see a
splashscreen, cut-scene videos and an option screen.<br>

<br>

For our game's START GameState, we will display some sort of introductory screen and then
present an option where the user can either start the game or exit the
game.<br>

<br>

The code for this, looks like this:-</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>




</span></span>
<table style="text-align: left; width: 732px; height: 44px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">Case</span> START</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CreateBricks()</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"BREAKOUT"</span>,Font72,80,50)&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"PRESS &lt;ENTER&gt; To START"</span>,Font,110,250)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"PRESS &lt;ESCAPE&gt; TO EXIT"</span>,Font,110,300)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; GameState=WAIT</span><br>

      </span><span style="color: rgb(153, 153, 153);"></span><br>




      </span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>







<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span><span style="font-weight: bold;"><br>






</span><span style="font-family: Arial;">Notice that at the end of the
START block, we change our state to the WAIT GameState which actually
does the waiting. A more verbose GameState for this would be
WAITFORUSERTODECIDE :)<br>

<br>

Before we get too ahead of ourselves, the alert amongst you would have
noticed that the BREAKOUT text is using a diferent font. This we
declare at the beginning of our framework as follows:-<br>

</span>
<table style="text-align: left; width: 793px; height: 88px;" border="0" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>

      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 704px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);">Local FontURL:String="http::www.2dgamecreators.com/tutorials/gameprogramming/breakout/"</span><br style="color: rgb(153, 153, 153);">

      <span style="color: rgb(153, 153, 153);">Global Font:TImageFont=LoadImageFont(FontURL+"BorisBlackBloxx.ttf",24)</span><br>

Global <span style="color: rgb(255, 255, 255);">Font72:</span>TImageFont=LoadImageFont<span style="color: rgb(255, 255, 255);">(FontURL+<span style="color: rgb(51, 255, 51);">"BorisBlackBloxx.ttf"</span>,72)</span><br>

      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 25px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>







<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>

We also need to declare the new constants<br>




</span></span>
<table style="text-align: left; width: 732px; height: 44px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);">' -----------------SETUP GAME CONDITIONS--------------------<br>

Const PLAYER_LAYER:Int=1<br>

Const PLAY:Int=1<br>

Const PAUSE:Int=2<br>

      <span style="color: rgb(255, 255, 255);"><span style="color: rgb(255, 255, 102);">Const</span> START:<span style="color: rgb(255, 255, 102);">Int</span>=3</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);"><span style="color: rgb(255, 255, 102);">Const</span> WAIT:<span style="color: rgb(255, 255, 102);">Int</span>=4</span></span>


      <br>




      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>

</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>

Finally we need to declare the WAIT case block as follows:-<br>




</span></span>
<table style="text-align: left; width: 732px; height: 44px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 639px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">Case</span> WAIT&nbsp;<span style="color: rgb(102, 204, 204);"> 'To Start</span></span><br style="color: rgb(255, 255, 255);">

      <br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(255, 255, 102);"> If KeyDown</span>(KEY_ESCAPE) <span style="color: rgb(255, 255, 102);">Or AppTerminate()</span></span><br style="color: rgb(255, 255, 102);">

      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End</span><br style="color: rgb(255, 255, 102);">

      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndIf</span><br style="color: rgb(255, 255, 102);">

      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(255, 255, 102);">

      <span style="color: rgb(255, 255, 255);"><span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If KeyDown</span>(KEY_ENTER)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(102, 204, 204);">'-------------Remove all Objects</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">ClearList</span> GameObjectList</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(102, 204, 204);">'--------------Now Create the game objects that we need</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TBall.Create(<span style="color: rgb(255, 255, 102);">LoadImage</span>(URL+<span style="color: rgb(51, 255, 51);">"ball.png"</span>),Width/2,400)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TPaddle.Create(<span style="color: rgb(255, 255, 102);">LoadImage</span>(URL+<span style="color: rgb(51, 255, 51);">"paddle.png"</span>),Width/2,0)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CreateBricks()</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GameState=PLAY</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(255, 255, 102);"> EndIf</span></span><br style="color: rgb(255, 255, 102);">

      <span style="color: rgb(255, 255, 255);"><span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FlushKeys()</span>&nbsp;&nbsp; </span><br>

      </span><br>




      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>

Notice again that the GameState changes just as we exit the WAIT block.<br>

Download the full source <a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/Breakout%20v014i.bmx">here</a>.</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"> We should see the following:-<br>
<br>

</span></span>
<table style="text-align: left; width: 100px;" border="0" cellpadding="2" cellspacing="2">























  <tbody>























    <tr>























      <td style="width: 33px;" align="undefined" valign="undefined"></td>























      <td style="width: 468px;" align="undefined" valign="undefined"><img style="width: 500px; height: 396px;" alt="" src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/T1_009.png"><br>






















      </td>























      <td><br>






















      </td>























    </tr>























  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>

<br>











































<h1><a class="mozTocH1" name="mozTocId578655"></a><small><small><span style="font-family: Tahoma;">Adding the GAMEOVER GameState</span></small></small></h1>











































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="font-weight: bold;"></span>The GameOver GameState is actually very simple. The GAMEOVER Block will look like this:-</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">:- </span></span>
<table style="text-align: left; width: 816px; height: 131px;" border="0" cellpadding="2" cellspacing="2">

















































  <tbody>

















































    <tr>

















































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 720px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;">&nbsp;<span style="color: rgb(255, 255, 255);">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">Case</span> GAMEOVER</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"GAMEOVER"</span>,Font72,60,50)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"PRESS &lt;ENTER&gt; TO RE-START"</span>,Font,80,250)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TText.Create(<span style="color: rgb(51, 255, 51);">"PRESS &lt;ESCAPE&gt; TO EXIT"</span>,Font,110,300)</span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">FlushKeys()</span></span><br style="color: rgb(255, 255, 255);">

      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GameState=WAIT</span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 32px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>




</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">All
we are doing is displaying the GAMEOVER notice and then asking the user
whether he/she wants to play another game or not. Then we go into a WAIT
GameState to wait on his/her input.<br>

<br>

The difficult bit is how do we decide that we have reached the GAMEOVER
state from the PLAY state. For our game, GAMEOVER is when all the
bricks are destroyed.<br>

<br>
There are several ways of doing this. I have decided for clarity and to
also show a diferent inheritance style to create a TScore Object
inherited from the TText Object as follows:-<br>




</span></span>
<table style="text-align: left; width: 816px; height: 392px;" border="0" cellpadding="2" cellspacing="2">

















































  <tbody>

















































    <tr>

















































      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 720px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);">Type <span style="color: rgb(255, 255, 255);">TScore</span> Extends <span style="color: rgb(255, 255, 255);">TText</span></span><br style="color: rgb(255, 255, 102);">
      <br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; Field <span style="color: rgb(255, 255, 255);">score</span>:Int</span><br style="color: rgb(255, 255, 102);">
      <br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; Function <span style="color: rgb(255, 255, 255);">Create:TScore(Text:<span style="color: rgb(255, 255, 102);">String</span>, Font:<span style="color: rgb(255, 255, 102);">TImageFont</span>,xstart:<span style="color: rgb(255, 255, 102);">Int</span>,ystart:<span style="color: rgb(255, 255, 102);">Int</span>)</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Local <span style="color: rgb(255, 255, 255);">B:TScore=</span>New <span style="color: rgb(255, 255, 255);">TScore</span></span><br style="color: rgb(255, 255, 255);">
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B.Text=Text</span><br style="color: rgb(255, 255, 255);">
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B.Font=Font</span><br style="color: rgb(255, 255, 255);">
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B.X=XStart</span><br style="color: rgb(255, 255, 255);">
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B.Y=YStart</span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ListAddLast <span style="color: rgb(255, 255, 255);">GameObjectList, B</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return <span style="color: rgb(255, 255, 255);">B</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; End Function</span><br style="color: rgb(255, 255, 102);">
      <br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; Method <span style="color: rgb(255, 255, 255);">UpdateSelf()<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 255, 102);">If </span>GameState&lt;&gt;PLAY <span style="color: rgb(255, 255, 102);">Then Return &nbsp; &nbsp;<span style="color: rgb(102, 204, 204);">'Do not continue if not in PLAY state</span></span><br>
      <br style="color: rgb(255, 255, 255);">
      </span></span><span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; score=0</span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; For Local<span style="color: rgb(255, 255, 255);"> B:TBricks=</span>EachIn <span style="color: rgb(255, 255, 255);">GameObjectList</span></span><br style="color: rgb(255, 255, 255);">
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; score :+ 1</span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Next</span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; If <span style="color: rgb(255, 255, 255);">score&lt;90 </span>Then <span style="color: rgb(255, 255, 255);">GameState=GAMEOVER</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; End Method</span><br style="color: rgb(255, 255, 102);">
      <br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; Method <span style="color: rgb(255, 255, 255);">drawself()</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetImageFont<span style="color: rgb(255, 255, 255);">(Font)</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetRotation <span style="color: rgb(255, 255, 255);">0</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetScale <span style="color: rgb(255, 255, 255);">0.75,0.75</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SetColor <span style="color: rgb(255, 255, 255);">255,0,0</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DrawText <span style="color: rgb(255, 255, 255);">Text+Score,X,Y</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; End Method</span><br style="color: rgb(255, 255, 102);">
      <br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">EndType</span><br style="color: rgb(255, 255, 102);">
      <br>




      </span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 32px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>
As you can see, the TScore object counts the number of bricks in the
GameObjectList (see the UpdateSelf Method) and then displays this
number on the graphic screen. Notice how I&nbsp;use the <span style="font-weight: bold;">SetScale</span> function to display a smaller font then the standard 36 point font that we were using before.<br>
<br>
Now, doing the counting of the bricks every frame is not very
efficient, a far better way is to either count (or reduce the score) at
each collision but I will leave that as an exercise for you to do.
(hint:use a global variable)<br>
<br>
Note that I change from PLAY to GAMEOVER at score&lt;90 rather than
wait for every bricks to be destroyed (takes too long to wait). Change
this to zero in a real game :)<br>




</span></span>
<table style="text-align: left; width: 797px; height: 52px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 720px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; If <span style="color: rgb(255, 255, 255);">score&lt;90 </span>Then <span style="color: rgb(255, 255, 255);">GameState=GAMEOVER</span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><br>




      </span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 13px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">&nbsp;<br>
</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">Another
thing to note
is that I have used the SetColor function to display the text in red.
Having done that, I had to upgrade all the other DrawSelf method to
ensure that the SetColor for them is back to white. It is important
that each object does not assume that state of the Color, Rotation and
Scale of the graphic display. If you've noticed I have reset these
values to what the current object need ie SetRotation to zero, scale to
0.75 etc<br>




</span></span>
<table style="text-align: left; width: 797px; height: 52px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 720px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console; color: rgb(153, 153, 153);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp; Method drawself()</span><br style="color: rgb(153, 153, 153);">
      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetImageFont(Font)</span><br style="color: rgb(153, 153, 153);">
      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetRotation 0</span><br style="color: rgb(153, 153, 153);">
      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetScale 0.75,0.75</span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(255, 255, 102);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SetColor <span style="color: rgb(255, 255, 255);">255,0,0</span></span><br style="color: rgb(255, 255, 102);">
      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DrawText Text+Score,X,Y</span><br style="color: rgb(153, 153, 153);">
      <span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp; End Method</span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);"><br>




      </span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 13px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">&nbsp;<br>
</span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">Before
this program can be completed, we now need to create an instance of our
TScore Object just before we start the game, in the WAIT block:- </span></span>
<table style="text-align: left; width: 797px; height: 52px;" border="0" cellpadding="2" cellspacing="2">




  <tbody>




    <tr>




      <td style="width: 36px;" align="undefined" valign="undefined">&nbsp;
&nbsp;</td>

















































      <td style="background-color: rgb(1, 81, 107); color: rgb(255, 255, 255); width: 720px;"><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"><span style="color: rgb(102, 204, 204);"></span></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 0);"><span style="color: rgb(255, 255, 0);"></span></span></span></span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Case WAIT&nbsp; 'To Start<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If KeyDown(KEY_ESCAPE) Or AppTerminate()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndIf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If KeyDown(KEY_ENTER)<br>
      <br>
'-------------Remove all Objects<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ClearList GameObjectList<br>
'--------------Now Create the game objects that we need<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TBall.Create(LoadImage(URL+"ball.png"),Width/2,400)<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; TPaddle.Create(LoadImage(URL+"paddle.png"),Width/2,0)<br>
      <span style="color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TScore.CREATE(<span style="color: rgb(51, 255, 51);">"SCORE:"</span>,Font,10,5)</span><br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CreateBricks()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GameState=PLAY<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndIf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FlushKeys()&nbsp;&nbsp; <br>




      </span></span></span><span style="font-family: Lucida Console; color: rgb(255, 255, 102);"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 255);"></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"><span style="color: rgb(192, 192, 192);"><span style="color: rgb(255, 255, 51);"></span><span style="color: rgb(255, 255, 51);"></span></span></span></span></span><span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><span style="color: rgb(255, 255, 102);"></span></span></span></td>

















































      <td style="width: 13px;" align="undefined" valign="undefined"></td>

















































    </tr>

















































  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"><br>
OK. We actually are done. Download this source code <a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/Breakout%20v014j.bmx">here</a> and build and run the program. We should be able to see the score at the top let corner of the screen<br>
<br>
</span></span>
<table style="text-align: left; width: 100px;" border="0" cellpadding="2" cellspacing="2">























  <tbody>























    <tr>























      <td style="width: 33px;" align="undefined" valign="undefined"></td>























      <td style="width: 468px;" align="undefined" valign="undefined"><img style="width: 500px; height: 396px;" alt="" src="./How to write a BreakOut Game: Part 6: A new revised Framework with Game States_files/T1_010.png"><br>






















      </td>























      <td><br>






















      </td>























    </tr>























  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>
<br>
<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span><br>






<h1><a class="mozTocH1" name="mozTocId938547"></a><small><small><small><span style="font-family: Tahoma;">Summary</span></small></small></small></h1>

































<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span><span style="font-family: Arial;">There
are other GameStates such as NEXTLEVEL, OPTIONS etc but we will leave
that for later game tutorials (or you can experiment for yourself). Please feel free to experiment with
these and other gamestates.<br>

<br>

What I hope I have been able to do is to show you a possible game
framework where the main elements of a game are there and to show that
once a framework such as this has been developed, with the power of
BlitzMax Object &nbsp;functionality, creating a game simply means
adding the required gameobjects - their attributes and behaviours and
how they relate to one another<br>

<br>

Good Luck with your programming and don't forget to have fun :)<br>
<br>
Back to &nbsp;<a href="http://web.archive.org/web/20070820042413/http://www.2dgamecreators.com/tutorials/gameprogramming/breakout/index.html">Index</a>.<br>

<br>






</span>










<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;"></span></span>









<span style="font-family: Lucida Console;"><span style="font-family: Tahoma;">
</span></span><span style="font-family: Tahoma;"></span>


<!--
     FILE ARCHIVED ON 04:24:13 Aug 20, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 05:40:51 Oct 04, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 55.84
  exclusion.robots: 0.268
  exclusion.robots.policy: 0.256
  RedisCDXSource: 3.188
  esindex: 0.011
  LoadShardBlock: 33.561 (3)
  PetaboxLoader3.datanode: 88.107 (4)
  CDXLines.iter: 15.81 (3)
  load_resource: 167.117
  PetaboxLoader3.resolve: 105.113
--></body></html>